---
phase: 02-data-driven-rules
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - scraper.py
autonomous: true

must_haves:
  truths:
    - "Stringer/roofer/foreman terms are excluded (installer false positives)"
    - "Interconnection engineer term is excluded (utility false positives)"
    - "EDA tools (Cadence, Synopsys, etc.) are excluded (semiconductor false positives)"
    - "Golden test set still passes (no regressions)"
  artifacts:
    - path: "scraper.py"
      provides: "Updated installer_terms list with stringer, roofer, foreman"
      contains: "stringer"
    - path: "scraper.py"
      provides: "Updated other_eng_terms list with interconnection engineer"
      contains: "interconnection engineer"
    - path: "scraper.py"
      provides: "New eda_tools exclusion block"
      contains: "eda_tools"
  key_links:
    - from: "scraper.py"
      to: "eda_tools exclusion"
      via: "New exclusion check before tier matching"
      pattern: "if any.*eda_tools"
---

<objective>
Add missing exclusion terms to reduce false positives from installer roles, utility engineering roles, and semiconductor EDA tools.

Purpose: Analysis of rejected leads identified specific terms that slip through the current filter. Adding these targeted exclusions improves precision without impacting recall for actual solar design roles.

Output: Updated scraper.py with expanded exclusion lists and new EDA tool exclusion block.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-data-driven-rules/02-RESEARCH.md
@scraper.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add missing installer/field role exclusions</name>
  <files>scraper.py</files>
  <action>
Expand the installer_terms list in description_matches() to include additional field/installation roles that are false positives.

Find the installer_terms list (around line 108-114) and ADD these terms to the END of the list:

```python
installer_terms = [
    'installer', 'installation technician', 'roof lead', 'rooftop',
    'journeyman electrician', 'apprentice electrician', 'lineman', 'lineworker',
    'o&m technician', 'field technician', 'service technician',
    'field service', 'commissioning technician', 'maintenance technician',
    'solar technician', 'pv technician', 'array supervisor',
    # Added in Phase 2 - installer false positives
    'stringer',           # Tennis/racquet AND solar stringing labor
    'roofer',             # Roofing labor, not design
    'foreman',            # Construction supervision
    'crew lead',          # Installation crew supervision
    'panel installer',    # Explicit installer role
]
```

NOTE: Keep all existing terms. Only ADD the new ones at the end with the comment marker.
  </action>
  <verify>
Run: `python -c "from scraper import description_matches; print('stringer excluded:', not description_matches('Solar stringer position, join our installation crew laying solar panels', None)); print('roofer excluded:', not description_matches('Solar roofer needed for PV installation crew', None))"`

Expected:
- stringer excluded: True
- roofer excluded: True
  </verify>
  <done>
- installer_terms list includes: stringer, roofer, foreman, crew lead, panel installer
- These terms are excluded from qualification
  </done>
</task>

<task type="auto">
  <name>Task 2: Add missing engineering role exclusions</name>
  <files>scraper.py</files>
  <action>
Expand the other_eng_terms list to include utility/grid engineering roles that are false positives.

Find the other_eng_terms list (around line 140-149) and ADD these terms to the END of the list:

```python
other_eng_terms = [
    'application engineer', 'applications engineer', 'technical sales', 'technical support',
    'field engineer', 'commissioning engineer', 'product engineer',
    'project engineer', 'construction engineer', 'site engineer',
    'structural engineer', 'civil engineer', 'mechanical engineer',
    'manufacturing engineer', 'process engineer', 'quality engineer',
    'systems engineer', 'transmission engineer', 'substation engineer',
    'protection and control', 'p&c engineer', 'relay engineer',
    'estimator', 'preconstruction',
    # Added in Phase 2 - utility/grid engineering false positives
    'interconnection engineer',  # Utility interface role
    'grid engineer',             # Grid/utility focus
    'protection engineer',       # Utility protection systems
    'metering engineer',         # Utility metering
]
```

NOTE: Keep all existing terms. Only ADD the new ones at the end with the comment marker.
  </action>
  <verify>
Run: `python -c "from scraper import description_matches; print('interconnection eng excluded:', not description_matches('Solar interconnection engineer handling utility interface for PV projects', None))"`

Expected:
- interconnection eng excluded: True
  </verify>
  <done>
- other_eng_terms list includes: interconnection engineer, grid engineer, protection engineer, metering engineer
- These utility/grid roles are excluded from qualification
  </done>
</task>

<task type="auto">
  <name>Task 3: Add EDA tool exclusions for semiconductor CAD</name>
  <files>scraper.py</files>
  <action>
Add a new exclusion block for EDA (Electronic Design Automation) tools used in semiconductor/chip design. These tools represent a different kind of "CAD" that causes false positives.

Find the semiconductor_terms exclusion block (around line 99-105). AFTER that block, ADD a new EDA tools exclusion block:

```python
    # Exclude semiconductor/chip design (different kind of CAD)
    semiconductor_terms = [
        'semiconductor', 'rtl', 'asic', 'fpga', 'vlsi', 'chip design',
        'physical verification', 'synthesis', 'place and route', 'foundry',
        'wafer', 'silicon', 'integrated circuit', 'ic design'
    ]
    if any(term in desc_lower for term in semiconductor_terms):
        return False

    # Exclude EDA/chip design tools (semiconductor CAD, not solar CAD)
    # Added in Phase 2 - these are chip design tools, not solar design tools
    eda_tools = [
        'cadence', 'synopsys', 'mentor graphics', 'siemens eda',
        'virtuoso', 'spectre', 'innovus', 'genus', 'conformal',
        'calibre', 'questa', 'modelsim', 'vcs', 'verdi',
        'primetime', 'icc2', 'design compiler', 'dc shell',
        'spyglass', 'formality', 'encounter', 'ic compiler'
    ]
    if any(tool in desc_lower for tool in eda_tools):
        return False
```

NOTE: Insert this AFTER the semiconductor_terms block and BEFORE the installer_terms block. Keep existing code unchanged.
  </action>
  <verify>
Run: `python -c "from scraper import description_matches; print('Cadence excluded:', not description_matches('CAD Designer using Cadence Virtuoso for solar inverter IC layout', None)); print('Synopsys excluded:', not description_matches('Design Engineer using Synopsys PrimeTime for solar power IC timing analysis', None))"`

Expected:
- Cadence excluded: True
- Synopsys excluded: True
  </verify>
  <done>
- eda_tools list includes major EDA vendors: Cadence, Synopsys, Mentor Graphics
- eda_tools list includes specific tools: Virtuoso, PrimeTime, Calibre, ICC2, etc.
- EDA tool mentions cause rejection (they indicate chip design, not solar design)
  </done>
</task>

</tasks>

<verification>
After all tasks complete:

1. New installer exclusions work:
   ```bash
   python -c "from scraper import description_matches; tests = [('stringer', 'Solar stringer crew'), ('roofer', 'Solar roofer needed'), ('foreman', 'PV installation foreman')]; [print(f'{t[0]} excluded:', not description_matches(t[1], None)) for t in tests]"
   ```
   Expected: All True

2. New engineering exclusions work:
   ```bash
   python -c "from scraper import description_matches; print('interconnection eng excluded:', not description_matches('Solar interconnection engineer at utility', None))"
   ```
   Expected: True

3. EDA tool exclusions work:
   ```bash
   python -c "from scraper import description_matches; tests = ['cadence', 'synopsys', 'virtuoso', 'primetime']; [print(f'{t} excluded:', not description_matches(f'CAD Designer using {t} for solar IC design', None)) for t in tests]"
   ```
   Expected: All True

4. No regressions on golden test:
   ```bash
   python evaluate.py --golden
   ```
   Expected: 100% precision, 75% recall (or better)

5. Valid solar design roles still qualify:
   ```bash
   python -c "from scraper import description_matches; print('Helioscope designer:', description_matches('Solar Designer using Helioscope for residential PV design', None)); print('AutoCAD drafter:', description_matches('AutoCAD Drafter creating stringing diagrams for solar arrays', None))"
   ```
   Expected: Both True
</verification>

<success_criteria>
- installer_terms expanded with: stringer, roofer, foreman, crew lead, panel installer
- other_eng_terms expanded with: interconnection engineer, grid engineer, protection engineer, metering engineer
- New eda_tools exclusion block with 20+ EDA tools/vendors
- All new exclusion terms correctly reject false positive job descriptions
- Golden test set passes with no regressions
- Valid solar design roles still qualify correctly
</success_criteria>

<output>
After completion, create `.planning/phases/02-data-driven-rules/02-02-SUMMARY.md`
</output>
